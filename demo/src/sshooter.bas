100 COLOR 15,1,1
110 SCREEN 2,2,0
120 DEFINT A-Z
130 GOSUB 2000

199 CALL TURBO ON
200 DIM EX(4),EY(4),EV(4),EW(4)
210 FOR I=0 TO 3
220   EX(I)=EX(I)=I*16
230   EY(I)=-16
240   EV(I)=0:EW(I)=0
250 NEXT I
260 T=0:ES=0
270 X=50:Y=100

280 LINE (0,0)-(136,176),15,B
281 FOR I=0 TO 25
282   PSET(RND(1)*132+2, RND(1)*172+2)
283 NEXT I

290 ON SPRITE GOSUB 800

300 ON STICK(0) GOTO 310,320,330,340,350,360,370,380
305 GOTO 400
310 Y=Y-2:GOTO 400
320 Y=Y-2:X=X+2:GOTO 400
330 X=X+2:GOTO 400
340 Y=Y+2:X=X+2:GOTO 400
350 Y=Y+2:GOTO 400
360 Y=Y+2:X=X-2:GOTO 400 
370 X=X-2:GOTO 400
380 Y=Y-2:X=X-2:GOTO 400 
400 IF X<0 THEN X=0
410 IF X>120 THEN X=120
420 IF Y<0 THEN Y=0
430 IF Y>160 THEN Y=160

500 IF STRIG(0) AND BC<>15 THEN BX=X+7:BY=Y-3:BC=15
510 IF BC=15 THEN BY=BY-2: IF BY<0 THEN BX=160:BC=0

600 T=T+1:IF T=120 THEN T=0 
610 IF (T MOD 10)=0 THEN IF ES=0 THEN ES=1 ELSE ES=0
620 IF (T MOD 30)=0 THEN SP=T\30:EW(SP)=2:EV(SP)=RND(1)*4-2:EY(SP)=0:EX(SP)=RND(1)*120
630 FOR I=0 TO 3
640   EX(I)=EX(I)+EV(I):EY(I)=EY(I)+EW(I)
650   IF EX(I)<0 THEN EX(I)=0:EV(I)=-EV(I)
660   IF EX(I)>126 THEN EX(I)=126:EV(I)=-EV(I)
670   IF EY(I)>160 THEN EY(I)=-16:EX(I)=I*16:EV(I)=0:EW(I)=0
680 NEXT I

700 SPRITE OFF
710 PUT SPRITE 0,(X,Y),15,2
720 PUT SPRITE 1,(X,Y),4,3
730 PUT SPRITE 2,(BX,BY),BC,4
740 FOR I=0 TO 3
750   PUT SPRITE I+3,(EX(I),EY(I)),2,ES
760 NEXT I
770 SPRITE ON
780 IF TIME<2 GOTO 780 ELSE TIME=0
790 GOTO 300

800 SPRITE OFF
810 FOR I=0 TO 3 
820   IF EX(I)+8>=X AND X+16>=EX(I) AND EY(I)+8>=Y AND Y+16>=EY(I) THEN GOSUB 900
830   IF EX(I)+8>=BX AND BX+1>=EX(I) AND EY(I)+8>=BY AND BY+3>=EY(I) THEN BX=160:BC=0:EY(I)=-16:EX(I)=I*16:EV(I)=0:EW(I)=0
840 NEXT I
850 RETURN

900 CALL TURBO OFF
910 run "select.bas"

1000 ' Enemy sprite 1
1010 DATA 20,91,BF,EE,FF,3F,20,40,00,00,00,00,00,00,00,00
1020 DATA 80,20,A0,E0,E0,80,80,40,00,00,00,00,00,00,00,00
1030 ' Enemy sprite 2
1040 DATA 20,11,3F,6E,FF,BF,A0,1B,00,00,00,00,00,00,00,00
1050 DATA 80,00,80,C0,E0,A0,A0,00,00,00,00,00,00,00,00,00
1060 ' Spaceship
1070 DATA 01,01,01,03,03,02,06,07,0F,0E,1C,3C,7E,F7,E3,C1
1080 DATA 00,00,00,80,80,80,C0,C0,E0,E0,70,78,FC,DE,8E,06
1090 ' Spaceship color detail
1100 DATA 00,00,00,00,00,01,01,00,00,01,03,03,01,00,00,00
1110 DATA 00,00,00,00,00,00,00,00,00,00,80,80,00,00,00,00
1120 ' Bullet
1130 DATA 80,80,80,00,00,00,00,00,00,00,00,00,00,00,00,00
1140 DATA 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
1150 DATA *

2000 'LOAD SPRITES
2010 S=&H3800
2020 READ R$: IF R$="*" THEN RETURN 
2030 VPOKE S,VAL("&H"+R$)
2040 S=S+1:GOTO 2020
